CREATE DATABASE CustomerAndOrder;
USE CustomerAndOrder;

CREATE TABLE CUSTOMER_DETAILS(
	id INT,
    cust_name varchar(255),
    Address varchar(255),
	Gender char(2),
    Pincode int,
    PRIMARY KEY (id)
    );
    
INSERT INTO CUSTOMER
	VALUES
    ('125','kundan','indore','M','123121'),
    ('256','Ashwin','Hydrabad','M','452121'),
    ('102','Rohan','Mandleshwar','M','451238'),
    ('356','Saloni','indore','F','1235478'),
    ('222','Rani','Banglore','F','451228');
    
    SELECT * FROM CUSTOMER;
    
    INSERT INTO CUSTOMER_DETAILS
    VALUES ('222','Rani','Banglore','F','451228');
    
CREATE TABLE ORDER_Details(
	Order_id INT PRIMARY KEY,
    dilevery_data DATETIME,
    cust_id int,
    FOREIGN KEY (cust_id) REFERENCES CUSTOMER_DETAILS(id) ON DELETE CASCADE
    );
    
    INSERT INTO ORDER_Details
    VALUES ('1','20-09-23 2.30.00','102'),
			('2','20-09-23 3.30.00','222');
            
	SELECT * FROM ORDER_DETAILS;
    
    -- ADD NEW COLUMN IN TABLE:-
	ALTER TABLE ORDER_DETAILS ADD Delivery_Boy_name VARCHAR(255);
    
    -- Modify THE DATATYPE
    ALTER TABLE CUSTOMER MODIFY Gender VARCHAR(2);
    
    DESC CUSTOMER; -- DESCRIPTION OF TABLE
    
    -- RENAME THE COLUMB
    ALTER TABLE ORDER_DETAILS CHANGE dilevery_data delivery_date_time DATETIME;
    
    -- DELETE COLUMN FROM TABLE
    ALTER TABLE ORDER_DETAILS DROP COLUMN Delivery_Boy_name;
    
	ALTER TABLE ORDER_DETAILS DROP COLUMN CUST_ID;
    
    -- RENAME THE TABLE NAME
    ALTER TABLE CUSTOMER RENAME TO CUSTOMER_DETAILS;
    SELECT * FROM CUSTOMER_DETAILS;
    
    
    -- THIS IS UNDER DATA MANIPULATION
    -- UPDATE TUPLES IN TABLE
    UPDATE CUSTOMER_DETAILS SET cust_name='Babu', Pincode='451221' WHERE id='256';
    UPDATE CUSTOMER_DETAILS SET PINCODE='451221'; -- THIS IS GIVE ERROR DUE TO SAFETY
    -- SO ENABLE THIS:-
    SET SQL_SAFE_UPDATES =0;
    
    DELETE FROM CUSTOMER_DETAILS WHERE ID='222';
    
    -- REPLACE 
    REPLACE INTO CUSTOMER_DETAILS(ID,ADDRESS) VALUES ('125','PUNE');
    -- IF ENTER DOES NOT HAVE THEN IT IS CREATE
    REPLACE INTO CUSTOMER_DETAILS(ID,ADDRESS) VALUES ('1205','PUNE');
    
    REPLACE INTO CUSTOMER_DETAILS SET ID='102',CUST_NAME='ADITYA',ADDRESS='MUMBAI';
